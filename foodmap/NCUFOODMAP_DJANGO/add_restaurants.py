#!/usr/bin/env python
import os
import sys
import django

# 設置 Django 環境
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'ncufoodmap_backend.settings')
django.setup()

from restaurants.models import Restaurant, Category
import random

def create_categories():
    """創建餐廳分類"""
    categories_data = [
        {'name': '中式料理', 'icon': 'fas fa-utensils'},
        {'name': '日式料理', 'icon': 'fas fa-fish'},
        {'name': '韓式料理', 'icon': 'fas fa-pepper-hot'},
        {'name': '西式料理', 'icon': 'fas fa-hamburger'},
        {'name': '義式料理', 'icon': 'fas fa-pizza-slice'},
        {'name': '泰式料理', 'icon': 'fas fa-leaf'},
        {'name': '咖啡廳', 'icon': 'fas fa-coffee'},
        {'name': '甜點店', 'icon': 'fas fa-birthday-cake'},
        {'name': '小吃攤', 'icon': 'fas fa-hotdog'},
        {'name': '火鍋店', 'icon': 'fas fa-fire'},
    ]
    
    created_categories = []
    for cat_data in categories_data:
        category, created = Category.objects.get_or_create(
            name=cat_data['name'],
            defaults={'icon': cat_data['icon']}
        )
        created_categories.append(category)
        print(f"分類 '{category.name}' {'創建' if created else '已存在'}")
    
    return created_categories

def create_restaurants():
    """創建餐廳數據"""
    categories = create_categories()
    
    # 中壢地區的餐廳數據
    restaurants_data = {
        '中式料理': [
            '老四川巴蜀麻辣燙', '金品茶樓', '鼎泰豐', '欣葉台菜', '梅子餐廳',
            '老北京炸醬麵', '蘭州拉麵', '川味張媽媽牛肉麵', '永和豆漿', '阿宗麵線',
            '鬍鬚張魯肉飯', '度小月擔仔麵', '老董牛肉麵', '建宏牛肉麵', '劉家酸菜白肉鍋',
            '海底撈火鍋', '小肥羊火鍋', '這一鍋', '石二鍋', '錢都涮涮鍋',
            '饗食天堂', '漢來海港', '君品酒店雲軒', '國賓大飯店粵菜廳', '晶華酒店栢麗廳',
            '點水樓', '京星港式飲茶', '稻香', '添好運', '港式茶餐廳',
            '老爺酒店中餐廳', '圓山大飯店', '福華大飯店', '喜來登大飯店', '君悅酒店',
            '台北101觀景餐廳', '美麗華摩天輪', '士林夜市', '饒河夜市', '寧夏夜市',
            '華西街夜市', '臨江街夜市', '師大夜市', '公館夜市', '景美夜市',
            '板橋湳雅夜市', '中和興南夜市', '新莊廟街夜市', '三重重新橋夜市', '蘆洲夜市'
        ],
        '日式料理': [
            '築地銀だこ', '一蘭拉麵', '博多一風堂', '麵屋武藏', '花月嵐',
            '山頭火拉麵', '豚王拉麵', '屯京拉麵', '麵屋一燈', '鳥貴族',
            '和民居食屋', '磯丸水產', '大戶屋', '定食8', '勝博殿',
            '杏子豬排', '銀座杏子日式豬排', '富士印日式炸豬排', '八方雲集', '鮮五丼',
            '爭鮮迴轉壽司', '壽司郎', '藏壽司', '元氣壽司', '海壽司',
            '築地鮮魚', '魚心', '橘色涮涮屋', '溫野菜', '但馬屋',
            '乾杯燒肉', '老乾杯', '燒肉同話', '牛角燒肉', '安庵燒肉',
            '茶寮侘助', '京都勝牛', '名代富士蕎麥麵', '讚岐烏龍麵', '丸龜製麵',
            'CoCo壱番屋', '金子半之助', '天丼てんや', '鳥開總本家', '串家物語',
            '日本橋海鮮丼', '築地本願寺', '銀座天一', '新宿歌舞伎町', '澀谷109'
        ],
        '韓式料理': [
            '姜虎東白丁烤肉', '八色烤肉', '新村站著吃烤肉', '韓式炸雞', '橋村炸雞',
            '兩班家韓式料理', '韓鄉韓式料理', '韓國館', '首爾韓式料理', '釜山韓式料理',
            '明洞韓式料理', '江南韓式料理', '弘大韓式料理', '東大門韓式料理', '梨大韓式料理',
            '韓式部隊鍋', '韓式泡菜鍋', '韓式豆腐鍋', '韓式海鮮鍋', '韓式牛肉湯',
            '韓式冷麵', '韓式拌飯', '韓式烤肉飯', '韓式炸醬麵', '韓式年糕',
            '韓式煎餅', '韓式紫菜包飯', '韓式辣炒年糕', '韓式炸雞配啤酒', '韓式烤腸',
            '韓式火鍋', '韓式燒烤', '韓式小菜', '韓式泡菜', '韓式醃蘿蔔',
            '韓式豆芽菜', '韓式涼拌菜', '韓式醬菜', '韓式湯品', '韓式甜點',
            '韓式咖啡', '韓式茶飲', '韓式果汁', '韓式汽水', '韓式燒酒',
            '韓式啤酒', '韓式清酒', '韓式米酒', '韓式果酒', '韓式雞尾酒'
        ],
        '西式料理': [
            'TGI FRIDAYS', 'Chilis', 'Outback', 'Texas Roadhouse', 'Dennys',
            'IHOP', 'Applebees', 'Olive Garden', 'Red Lobster', 'Cheesecake Factory',
            '茹絲葵', '王品牛排', '夏慕尼', '陶板屋', '藝奇',
            '原燒', '聚北海道昆布鍋', '石二鍋', '這一鍋', '錢都涮涮鍋',
            'Subway', 'McDonalds', 'KFC', 'Burger King', 'Pizza Hut',
            'Dominos', 'Papa Johns', 'California Pizza Kitchen', 'Hard Rock Cafe', 'Planet Hollywood',
            'Starbucks', 'Costa Coffee', 'Dunkin Donuts', 'Krispy Kreme', 'Cold Stone',
            'Haagen-Dazs', 'Baskin-Robbins', 'Ben & Jerrys', 'Dairy Queen', 'Yogurtland',
            '85度C', '路易莎咖啡', 'cama café', '怡客咖啡', '丹堤咖啡',
            '西雅圖極品咖啡', '伯朗咖啡', '金礦咖啡', '真鍋咖啡', '上島珈琲'
        ],
        '義式料理': [
            'Olive Garden', 'Carrabbas', 'Buca di Beppo', 'Romano\'s Macaroni Grill', 'Fazolis',
            '瓦城泰統', '非常泰', '泰市場', '泰式料理', '泰國菜',
            'Pizza Hut', 'Dominos', 'Papa Johns', 'California Pizza Kitchen', 'Sbarro',
            '拿坡里披薩', '必勝客', '達美樂', '薄多義', '洋蔥',
            '義大利麵工廠', '義式屋', '義饗食堂', '義式餐廳', '義大利料理',
            '義式燉飯', '義式麵條', '義式披薩', '義式沙拉', '義式湯品',
            '義式前菜', '義式主菜', '義式甜點', '義式咖啡', '義式冰淇淋',
            '義式麵包', '義式起司', '義式火腿', '義式香腸', '義式醬料',
            '義式橄欖油', '義式醋', '義式香料', '義式紅酒', '義式白酒',
            '義式氣泡酒', '義式利口酒', '義式咖啡酒', '義式檸檬酒', '義式杏仁酒'
        ],
        '泰式料理': [
            '瓦城泰統', '非常泰', '泰市場', '泰式料理', '泰國菜',
            '泰式酸辣湯', '泰式綠咖哩', '泰式紅咖哩', '泰式黃咖哩', '泰式椰汁雞',
            '泰式打拋豬', '泰式炒河粉', '泰式涼拌青木瓜絲', '泰式芒果糯米飯', '泰式椰汁西米露',
            '泰式冬陰功湯', '泰式海鮮湯', '泰式酸辣魚湯', '泰式蝦餅', '泰式春捲',
            '泰式炸雞翅', '泰式烤魚', '泰式烤雞', '泰式烤豬肉', '泰式烤牛肉',
            '泰式炒飯', '泰式炒麵', '泰式炒粿條', '泰式炒空心菜', '泰式炒豆芽',
            '泰式奶茶', '泰式椰汁', '泰式果汁', '泰式汽水', '泰式啤酒',
            '泰式甜點', '泰式布丁', '泰式果凍', '泰式冰品', '泰式刨冰',
            '泰式按摩', '泰式SPA', '泰式文化', '泰式音樂', '泰式舞蹈',
            '泰式節慶', '泰式傳統', '泰式藝術', '泰式手工藝', '泰式紀念品'
        ],
        '咖啡廳': [
            'Starbucks', 'Costa Coffee', 'Dunkin Donuts', 'Tim Hortons', 'Peets Coffee',
            '85度C', '路易莎咖啡', 'cama café', '怡客咖啡', '丹堤咖啡',
            '西雅圖極品咖啡', '伯朗咖啡', '金礦咖啡', '真鍋咖啡', '上島珈琲',
            '星巴克', '咖啡弄', '咖啡廳', '咖啡店', '咖啡館',
            '藍瓶咖啡', '知更鳥咖啡', '貓咪咖啡', '狗狗咖啡', '鳥咖啡',
            '森林咖啡', '海邊咖啡', '山上咖啡', '城市咖啡', '鄉村咖啡',
            '復古咖啡', '現代咖啡', '文青咖啡', '網美咖啡', '親子咖啡',
            '寵物咖啡', '書店咖啡', '花店咖啡', '音樂咖啡', '藝術咖啡',
            '手沖咖啡', '義式咖啡', '美式咖啡', '拿鐵咖啡', '卡布奇諾',
            '摩卡咖啡', '瑪奇朵咖啡', '康寶藍咖啡', '阿芙佳朵', '冰滴咖啡'
        ],
        '甜點店': [
            'Haagen-Dazs', 'Baskin-Robbins', 'Ben & Jerrys', 'Dairy Queen', 'Cold Stone',
            '85度C', '亞尼克', '法朋', '糖村', '郭元益',
            '不二家', '義美', '統一', '愛之味', '黑橋牌',
            '蛋糕店', '麵包店', '甜甜圈店', '冰淇淋店', '布丁店',
            '泡芙店', '馬卡龍店', '巧克力店', '糖果店', '餅乾店',
            '司康店', '瑪芬店', '可頌店', '吐司店', '貝果店',
            '鬆餅店', '煎餅店', '薄餅店', '厚餅店', '格子餅店',
            '蜂蜜蛋糕', '起司蛋糕', '巧克力蛋糕', '水果蛋糕', '奶油蛋糕',
            '生日蛋糕', '婚禮蛋糕', '節慶蛋糕', '客製蛋糕', '造型蛋糕',
            '法式甜點', '日式甜點', '韓式甜點', '義式甜點', '美式甜點'
        ],
        '小吃攤': [
            '鹽酥雞', '雞排', '臭豆腐', '蚵仔煎', '大腸包小腸',
            '胡椒餅', '車輪餅', '紅豆餅', '雞蛋糕', '章魚燒',
            '滷味', '關東煮', '麻辣燙', '酸辣粉', '涼麵',
            '刈包', '割包', '肉圓', '碗粿', '筒仔米糕',
            '油飯', '米糕', '粽子', '湯圓', '豆花',
            '仙草', '愛玉', '粉圓', '芋圓', '地瓜圓',
            '燒餅', '油條', '豆漿', '米漿', '杏仁茶',
            '花生湯', '紅豆湯', '綠豆湯', '薏仁湯', '蓮子湯',
            '夜市小吃', '路邊攤', '流動攤販', '市場小吃', '學校福利社',
            '便當店', '自助餐', '快餐店', '速食店', '外帶店'
        ],
        '火鍋店': [
            '海底撈', '小肥羊', '這一鍋', '石二鍋', '錢都涮涮鍋',
            '聚北海道昆布鍋', '原燒', '陶板屋', '藝奇', '夏慕尼',
            '麻辣鍋', '酸菜白肉鍋', '羊肉爐', '薑母鴨', '燒酒雞',
            '麻油雞', '四神湯', '十全大補湯', '當歸鴨', '何首烏雞',
            '人參雞', '蟲草雞', '靈芝雞', '枸杞雞', '紅棗雞',
            '涮涮鍋', '壽喜燒', '關東煮', '韓式火鍋', '泰式火鍋',
            '日式火鍋', '義式火鍋', '法式火鍋', '德式火鍋', '俄式火鍋',
            '個人鍋', '雙人鍋', '家庭鍋', '團體鍋', '宴會鍋',
            '吃到飽火鍋', '單點火鍋', '套餐火鍋', '外帶火鍋', '宅配火鍋',
            '冷凍火鍋', '即食火鍋', '微波火鍋', '電鍋火鍋', '瓦斯爐火鍋'
        ]
    }
    
    # 中壢地區的地址
    addresses = [
        '桃園市中壢區中大路300號', '桃園市中壢區新生路168號', '桃園市中壢區中正路123號',
        '桃園市中壢區民族路456號', '桃園市中壢區中山路789號', '桃園市中壢區復興路321號',
        '桃園市中壢區中華路654號', '桃園市中壢區環中東路987號', '桃園市中壢區中園路147號',
        '桃園市中壢區新明路258號', '桃園市中壢區龍岡路369號', '桃園市中壢區內壢路741號',
        '桃園市中壢區青埔路852號', '桃園市中壢區高鐵路963號', '桃園市中壢區領航路159號',
        '桃園市中壢區文化路753號', '桃園市中壢區元化路486號', '桃園市中壢區延平路357號',
        '桃園市中壢區仁愛路268號', '桃園市中壢區信義路179號', '桃園市中壢區和平路591號',
        '桃園市中壢區自由路482號', '桃園市中壢區民權路673號', '桃園市中壢區博愛路394號',
        '桃園市中壢區光明路715號', '桃園市中壢區建國路826號', '桃園市中壢區中興路537號',
        '桃園市中壢區忠孝路648號', '桃園市中壢區仁德路259號', '桃園市中壢區福州路371號'
    ]
    
    # 電話號碼
    phone_prefixes = ['03-422', '03-425', '03-427', '03-433', '03-435', '03-438']
    
    # 餐廳描述模板
    descriptions = [
        '提供道地美味的料理，新鮮食材，用心烹調。',
        '溫馨舒適的用餐環境，適合家庭聚餐。',
        '創新料理與傳統口味的完美結合。',
        '平價美食，CP值超高，學生最愛。',
        '精緻料理，高品質服務，商務聚餐首選。',
        '24小時營業，隨時滿足您的味蕾。',
        '網美打卡熱點，美食與美景兼具。',
        '老字號餐廳，傳承三代的好味道。',
        '健康養生料理，注重營養均衡。',
        '異國風味料理，帶您環遊世界。'
    ]
    
    total_created = 0
    
    for category in categories:
        category_restaurants = restaurants_data.get(category.name, [])
        
        for i, restaurant_name in enumerate(category_restaurants):
            # 檢查餐廳是否已存在
            if Restaurant.objects.filter(name=restaurant_name).exists():
                continue
                
            # 隨機選擇地址、電話、描述
            address = random.choice(addresses)
            phone = f"{random.choice(phone_prefixes)}-{random.randint(1000, 9999)}"
            description = random.choice(descriptions)
            
            # 生成隨機座標（中壢地區）
            lat = round(24.9500 + random.uniform(-0.05, 0.05), 6)
            lng = round(121.2260 + random.uniform(-0.05, 0.05), 6)
            
            # 創建餐廳
            restaurant = Restaurant.objects.create(
                name=restaurant_name,
                address=address,
                phone=phone,
                description=description,
                lat=lat,
                lng=lng,
                is_active=True
            )
            
            # 添加分類
            restaurant.categories.add(category)
            
            # 有些餐廳可能有多個分類
            if random.random() < 0.3:  # 30% 機率有第二個分類
                other_categories = [c for c in categories if c != category]
                if other_categories:
                    second_category = random.choice(other_categories)
                    restaurant.categories.add(second_category)
            
            total_created += 1
            
        print(f"分類 '{category.name}' 已添加 {len(category_restaurants)} 家餐廳")
    
    print(f"\n總共創建了 {total_created} 家餐廳")

if __name__ == '__main__':
    print("開始創建餐廳數據...")
    create_restaurants()
    print("餐廳數據創建完成！") 